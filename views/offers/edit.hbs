{{#section 'stylesheets'}}
{{/section}}

<form action="/offers/{{id}}?_method=PUT" method="POST">
  <div class="form-row">
    <div class="form-group col-md-6">
      <p>Categoria do produto</p>
      <select class="form-control col-6" name="offer[category]" id="category">
        <option disabled selected value>{{category}}</option>
        <option value="Fertilizantes sólidos">Fertilizantes sólidos</option>
        <option value="Defensivos agrícolas/agrotóxicos">Defensivos agrícolas/agrotóxicos</option>
        <option value="Sementes">Sementes</option>
        <option value="Fertilizantes líquidos/adjuvantes/biológicos">Fertilizantes líquidos/adjuvantes/biológicos</option>
      </select>
    </div>
    <div class="form-group col-md-6">
      <p>Nome do produto</p>
      <div id="product-selector">
        <select class="form-control col-6" name="offer[product]">
          <option disabled selected value>{{product}}</option>
        </select>
      </div>
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col-md-6">
      <p>Quantidade em estoque</p>
      <input type="number" name="offer[stock]" value="{{stock}}" placeholder="{{stock}}">
    </div>
    <div class="form-group col-md-6">
      <p>Quantidade mínima a ser comprada</p>
      <input type="number" name="offer[minAmount]" value="{{minAmount}}" placeholder="{{minAmount}}">
    </div>
  </div>
  <p>Preços:</p>
  <div class="form-row">
    <div class="form-group col-md-4">
      <label>Baixo</label>
        <input type="number" name="offer[price][low]" value="{{price.low}}" placeholder="{{price.low}}">
    </div>
    <div class="form-group col-md-4">
      <label>Médio</label>
        <input type="number" name="offer[price][average]" value="{{price.average}}" placeholder="{{price.average}}">
    </div>
    <div class="form-group col-md-4">
      <label>Alto</label>
        <input type="number" name="offer[price][high]" value="{{price.high}}" placeholder="{{price.high}}">
    </div>
  </div>
  <div class="form-group">
    <p>Quantidade para mudança de preço</p>
    <label>Muda para o preço médio</label>
      <input type="number" name="offer[breakpoints][average]" value="{{breakpoints.average}}" placeholder="{{breakpoints.average}}">
    <label>Muda para o preço baixo</label>
      <input type="number" name="offer[breakpoints][low]" value="{{breakpoints.low}}" placeholder="{{breakpoints.low}}">
  </div>
  <div class="form-group">
    <label for="delivery">Forma de entrega</label>
    <select class="form-control col-2" name="offer[delivery]">
      <option disabled selected value>{{delivery}}</option>
      <option value="em até 48 horas">Em até 48 horas</option>
      <option value="em até 31 dias">Em até 31 dias</option>
      <option value="safra">Safra</option>
      <option value="safrinha">Safrinha</option>
    </select>
  </div>
  <button class="btn" type="submit">Salvar</button>
</form>

{{#section 'scripts'}}
<script type="text/javascript">
  $(document).ready(() => {
    $("#category").change(() => {
      $.get("teste", { category: $('#category').val() }, (result) => {
        $("#product-selector").html(result);
      });
    });
  });
</script>
{{/section}}
