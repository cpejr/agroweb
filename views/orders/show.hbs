{{#section 'stylesheets'}}
{{/section}}

<div class="container">
  <div class="justify-content-center mx-sm-auto">
    <div class="row">
      <div class="col-12 ml-1 mb-3 text-center justify-content-center">
        <h2 class="my-0 py-0">{{offer.product.name}}</h2>
        <i class="text-muted">Produto {{offer.product.generic}}</i>
      </div>
      {{#ifCond userType 'Produtor'}}
      <!-- Seller info -->
      <div class="col-12 col-md-6 mt-3">
        <h2 class="mb-4">Dados do vendedor</h2>
        <h4>Empresa</h4>
        <p class="mb-4">{{offer.seller.fantasyName}}</p>
        <h4>Contato</h4>
        <p>Telefone: {{offer.seller.logistics.phone}}</p>
        <p class="mb-4">E-mail: {{offer.seller.logistics.email}}</p>
        <h4>Endereço</h4>
        <p class="mb-4">{{offer.seller.address.street}}, {{offer.seller.address.number}}, {{offer.seller.address.city}}, {{offer.seller.address.state}}</p>
      </div>
      <!-- end Seller info -->
      {{else ifCond userType 'Indústria'}}
      <!-- Buyer info -->
      <div class="col-12 col-md-6 mt-3">
        <h2 class="mb-4">Dados do comprador</h2>
        <h4>Nome</h4>
        <p class="mb-4">{{buyer.fullName}}</p>
        <h4>Contato</h4>
        <p>Telefone: {{buyer.phone}}</p>
        <p class="mb-4">E-mail: {{buyer.email}}</p>
        <h4>Endereço</h4>
        <p class="mb-4">{{buyer.address.street}}, {{buyer.address.number}}, {{buyer.address.city}}, {{buyer.address.state}}</p>
      </div>
      <!-- end Buyer info -->
      {{else}}
      <!-- Seller info -->
      <div class="col-12 col-md-6 mt-3">
        <h2 class="mb-4">Dados do vendedor</h2>
        <h4>Empresa</h4>
        <p class="mb-4">{{offer.seller.fantasyName}}</p>
        <h4>Contato</h4>
        <p>Telefone: {{offer.seller.logistics.phone}}</p>
        <p class="mb-4">E-mail: {{offer.seller.logistics.email}}</p>
        <h4>Endereço</h4>
        <p class="mb-4">{{offer.seller.address.street}}, {{offer.seller.address.number}}, {{offer.seller.address.city}}, {{offer.seller.address.state}}</p>
      </div>
      <!-- end Seller info -->
      <!-- Buyer info -->
      <div class="col-12 col-md-6 mt-3 ">
        <h2 class="mb-4">Dados do comprador</h2>
        <h4>Nome</h4>
        <p class="mb-4">{{buyer.fullName}}</p>
        <h4>Contato</h4>
        <p>Telefone: {{buyer.phone}}</p>
        <p class="mb-4">E-mail: {{buyer.email}}</p>
        <h4>Endereço</h4>
        <p class="mb-4">{{buyer.address.street}}, {{buyer.address.number}}, {{buyer.address.city}}, {{buyer.address.state}}</p>
      </div>
      <!-- end Buyer info -->
      {{/ifCond}}

      <!-- Transaction info -->
      <div class="col-6 ml-1 mb-3 mt-3 mx-sm-auto">
          <h4>Entrega</h4>
          <p>{{offer.delivery}}</p>

          <h4>Quantidade comprada</h4>
          <p>{{amountBought}} {{offer.product.unit}}</p>

          <h4>Preço total</h4>
          <p data-usd={{offer.usd}}>R$ {{priceBought}}</p>
      </div>
      <!-- end Transaction info -->



    <div class="col-6 pb-2 mb-2 mt-2">
      <h4>Descrição</h4>
      <p>{{offer.product.description}}</p>

      {{#ifCond userType 'Administrador'}}
      <h4 class="mt-5">Alterar status da taxa</h4>
      <div class="dropdown pb-4">
        <button name="taxStatus"  type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
        {{#ifCond taxStatus 'Aguardando boleto'}}
        class="btn btn-info dropdown-toggle col-6">
        Aguardando boleto

        {{else ifCond taxStatus 'Aguardando pagamento'}}
        class="btn btn-warning dropdown-toggle col-6">
        Aguardando pagamento

        {{else ifCond taxStatus 'Pagamento confirmado'}}
        class="btn btn-success  dropdown-toggle col-6">
        Pagamento confirmado

        {{else}}
        class="btn  dropdown-toggle btn-danger col-6">
        Cancelado
        {{/ifCond}}
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" >
        <form  method= "POST" action="/admin/{{id}}/updateTaxTransaction">
          <a class="dropdown-item" href="#">
            <button type="submit" align="center" class="btn btn-outline-info col-12" name="taxStatus" value="Aguardando boleto">
              Aguardando boleto
            </button>
          </a>
        </form>
        <form method= "POST" action="/admin/{{id}}/updateTaxTransaction">
          <a class="dropdown-item " href="#">
            <button type="submit" class="btn btn-outline-warning col-12" name="taxStatus" value="Aguardando pagamento">
              Aguardando pagamento
            </button>
          </a>
        </form>
        <form method= "POST" action="/admin/{{id}}/updateTaxTransaction">
          <a class="dropdown-item" href="#">
            <button type="submit" class="btn btn-outline-success col-12" name="taxStatus" value="Pagamento confirmado">
              Pagamento confirmado
            </button>
          </a>
        </form>

        <form method= "POST" action="/admin/{{id}}/updateTaxTransaction">
          <a class="dropdown-item" href="#">
            <button type="submit" class="btn btn-outline-danger col-12" name="taxStatus" value="Cancelado">
              Cancelado
            </button>
          </a>
        </form>
      </div>
      </div>
      {{/ifCond}}
    </div>

    <div class="mx-auto col-10 col-md-5 pb-2 mb-2 mt-4">
      {{#ifNotEq userType 'Administrador'}}
        {{#ifNotEq userType 'Indústria'}}
          {{#ifCond status 'Cotado'}}
            <form action="/transaction/{{id}}?_method=PUT" method="POST">
              <button class="btn btn-outline-success col-12" type="submit" name="button" type="submit" name="button">Confirmar compra</button>
            </form>
         {{/ifCond}}
       {{/ifNotEq}}
      {{/ifNotEq}}
      {{#ifNotEq status 'Cancelado'}}
        {{#ifNotEq userType 'Administrador'}}
          {{#ifNotEq userType 'Indústria'}}
            <div class="text-center my-3 justify-content-center">
              <form action="/transaction/{{id}}?_method=DELETE" method="POST" id="form-delete">
                <button type="submit" class="btn btn-outline-danger col-12" name="status" value="Cancelado">
                  Cancelar compra
                </button>
              </form>
            </div>
          {{/ifNotEq}}
        {{/ifNotEq}}
      {{/ifNotEq}}
    <!-- end Product Description -->
  </div>
</div>

{{#section 'scripts'}}
<script src="/javascripts/money.js"></script>
{{/section}}
